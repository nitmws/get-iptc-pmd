<!DOCTYPE html>
<html  lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Get IPTC PMD</title>
    <link rel="stylesheet" href="stylesheets/bootstrap.min.css">
    <link  rel="stylesheet"  href="stylesheets/style_wbs.css">
    <script  type="text/javascript" src="/javascripts/spin.min.js"></script>
    <script  type="text/javascript">
        function goToGetPMDdownload()
        {
            var opts = {
                lines: 13 // The number of lines to draw
                , length: 28 // The length of each line
                , width: 14 // The line thickness
                , radius: 42 // The radius of the inner circle
                , scale: 1 // Scales overall size of the spinner
                , corners: 1 // Corner roundness (0..1)
                , color: '#000' // #rgb or #rrggbb or array of colors
                , opacity: 0.25 // Opacity of the lines
                , rotate: 0 // The rotation offset
                , direction: 1 // 1: clockwise, -1: counterclockwise
                , speed: 1 // Rounds per second
                , trail: 60 // Afterglow percentage
                , fps: 20 // Frames per second when using setTimeout() as a fallback for CSS
                , zIndex: 2e9 // The z-index (defaults to 2000000000)
                , className: 'spinner' // The CSS class to assign to the spinner
                , top: '50%' // Top position relative to parent
                , left: '50%' // Left position relative to parent
                , shadow: false // Whether to render a shadow
                , hwaccel: false // Whether to use hardware acceleration
                , position: 'absolute' // Element positioning
            }
            var target = document.getElementById('getpmdForm')
            var spinner = new Spinner(opts).spin(target);

            var getUrl = '/getpmd/html/';
            getUrl += document.forms[0].design.value;
            getUrl += '/' + document.forms[0].labeltype.value;
            if (document.forms[0].tourl.value !== ''){
                getUrl += '/?imgurl=' + document.forms[0].tourl.value;
            }
            window.location = getUrl;
            return false;
        }
        function showSpinner(){
            var opts = {
                lines: 13 // The number of lines to draw
                , length: 28 // The length of each line
                , width: 14 // The line thickness
                , radius: 42 // The radius of the inner circle
                , scale: 1 // Scales overall size of the spinner
                , corners: 1 // Corner roundness (0..1)
                , color: '#000' // #rgb or #rrggbb or array of colors
                , opacity: 0.25 // Opacity of the lines
                , rotate: 0 // The rotation offset
                , direction: -1 // 1: clockwise, -1: counterclockwise
                , speed: 1 // Rounds per second
                , trail: 60 // Afterglow percentage
                , fps: 20 // Frames per second when using setTimeout() as a fallback for CSS
                , zIndex: 2e9 // The z-index (defaults to 2000000000)
                , className: 'spinner' // The CSS class to assign to the spinner
                , top: '50%' // Top position relative to parent
                , left: '50%' // Left position relative to parent
                , shadow: false // Whether to render a shadow
                , hwaccel: false // Whether to use hardware acceleration
                , position: 'absolute' // Element positioning
            }
            var target = document.getElementById('getpmdForm')
            var spinner = new Spinner(opts).spin(target);
            return true;
        }
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>
<body>
    <div class="container">
        <h5 style='color:#cc6600; '>This is a test site of the <a href="https://github.com/nitmws/get-iptc-pmd">get-iptc-pmd project on Github</a></h5>
        <div class="row">
            <div class="col-md-5"><h1>Get IPTC Photo Metadata ...</h1></div>
        </div>
        <h3>Option A: ... embedded into an image on the web</h3>
        <form id="getpmdForm" action="#"  method="get"  onsubmit="return goToGetPMDdownload()">
            <div class="form-group">
                <div class="input-group">
                    <label  for="tourl">Enter the URL of the image file:
                        <input  name="tourl" size="80"  id="tourl"  type="text" class="form-control" placeholder="Image URL" aria-describedby="basic-addon2">
                    </label>
                </div>
                (If this field is empty the metadata of the <a  href="https://www.iptc.org/std/photometadata/examples/IPTC-PhotometadataRef-Std2016_large.jpg" target="_blank">IPTC reference image of the Photo Metadata
                Standard 2016</a> is shown. This image file comprises all metadata
                fields defined by that standard.)
            </div>
            <div class="form-group">
                <strong>Design of the output:</strong><br>
                <div class="radio">
                    <label><input  name="design"  checked="checked"  value="stds"  type="radio">
                        Grouped by technical format standards IIM, XMP and Exif</label>
                </div>
                <div class="radio">
                    <label><input  name="design"  value="topics"  type="radio">
                        Grouped by common topics of fields (General content, persons, locations, ..., rights, licence, administrative issues)
                    </label>
                 </div>
                <div class="radio">
                    <label><input  name="design"  value="compare"  type="radio">
                        Compare field values embedded in different formats
                    </label>
                </div>
            </div>
            <div class="form-inline">
                <div class="form-group">
                    <strong>The Field Names show:&nbsp;&nbsp;</strong>
                    <div class="radio">
                        <label><input  name="labeltype"  checked="checked"  value="ipmd"  type="radio">
                            IPTC Photo Metadata Std names&nbsp;&nbsp;&nbsp;</label>
                    </div>
                    <div class="radio">
                        <label><input  name="labeltype"  value="std"  type="radio">
                            Field ID of technical format (IIM, XMP, Exif)&nbsp;&nbsp;&nbsp;</label>
                    </div>
                    <div class="radio">
                        <label><input  name="labeltype"  value="et"  type="radio">
                            Field ID used by Exiftool</label>
                    </div>
                </div>
            </div>
            <input  value="Get Photo Metadata of Web Image"  type="submit" class="btn btn-success">
        </form>


        <h3>Option B: ... embedded into an image uploaded from your computer</h3>
        <form  id="uploadForm"  enctype="multipart/form-data"  action="/upload"  method="post" onsubmit="return showSpinner();">
            <div class="input-group">
                <label class="input-group-btn">
                    <span class="btn btn-default btn-file">
                        Select image file&hellip; <input id="my-file-selector" name="userPhoto" type="file" style="display:none;" onchange="$('#upload-file-info').val($(this).val());">
                    </span>
                </label>
                <input type="text" class="form-control" id="upload-file-info" readonly>
            </div>
            <div class="form-group">
                <strong>Design of the output:</strong><br>
                <div class="radio">
                    <label><input  name="design"  checked="checked"  value="stds"  type="radio">
                        Grouped by technical format standards IIM, XMP and Exif</label>
                </div>
                <div class="radio">
                    <label><input  name="design"  value="topics"  type="radio">
                        Grouped by common topics of fields (General content, persons, locations, ..., rights, licence, administrative issues)
                    </label>
                </div>
                <div class="radio">
                    <label><input  name="design"  value="compare"  type="radio">
                        Compare field values embedded in different formats
                    </label>
                </div>
            </div>
            <div class="form-inline">
                <div class="form-group">
                    <strong>The Field Names show:&nbsp;&nbsp;</strong>
                    <div class="radio">
                        <label><input  name="labeltype"  checked="checked"  value="ipmd"  type="radio">
                            IPTC Photo Metadata Std names&nbsp;&nbsp;&nbsp;</label>
                    </div>
                    <div class="radio">
                        <label><input  name="labeltype"  value="std"  type="radio">
                            Field ID of technical format (IIM, XMP, Exif)&nbsp;&nbsp;&nbsp;</label>
                    </div>
                    <div class="radio">
                        <label><input  name="labeltype"  value="et"  type="radio">
                            Field ID used by Exiftool</label>
                    </div>
                </div>
            </div>
            <input  value="Get Photo Metadata of Local Image"  type="submit" class="btn btn-success">
        </form>
        <div id="info1" class="row">
            <div class="col-md-6">
                <h4>This service ...</h4>
                <p class="prelist">... builds on the IPTC <a href="https://iptc.org/standards/photo-metadata/iptc-standard/" target="_blank">Photo Metadata Standard</a> and its technical implementations IIM and XMP, and references to Exif. The images are processed this way:</p>
                <ul class="list1">
                    <li>An image file - either referenced by a URL or uploaded - is searched for headers holding metadata in the Exif, IIM and XMP format.</li>
                    <li>Each of the headers is searched for metadata fields defined by the <a href="https://iptc.org/standards/photo-metadata/iptc-standard/" target="_blank">IPTC Photo Metadata Standard</a>.</li>
                    <li>What has been found is displayed in three different groupings, see above.</li>
                    <li>For the two grouped display types one can select what the Field Names of the results table show.</li>
                </ul>
                <p>A key element of this service is <a href="http://owl.phy.queensu.ca/~phil/exiftool/" target="_blank">ExifTool</a>, a software developed by Phil Harvey, to retrieve a rich set of metadata fields in different technical formats or to embed such a set into image and video files.</p>
            </div>
            <div class="col-md-4">
                <h4>Help for checking images on any web page</h4>
                <p>Drag the IptcPMD (IPTC Photo Metadata) on the right to the button bar of your browser. If you want to see the photo metadata of an image on a web page then click on the IptcPMD in the toolbar while you view this page. The Javascript behind this button tries to retrieve the first URL of an image on this page. If one is found the result is shown grouped by the technical format standards IIM, XMP and Exif.</p>
            </div>
            <div class="col-md-2">
                <div style="border: 2px black solid; background-color: lightgoldenrodyellow; margin-top: 45px; margin-left:5px; padding:5px;"><a onmouseover="window.status='Drag IptcPMD to your button bar. When you are on a page showing an image click on IptcPMD to start the metadata investigation.'; return true;" onmouseout="window.status=''; return true;" onclick="alert('Drag IptcPMD to your button bar. When you are on a page showing an image click on IptcPMD to start the metadata investigation.'); return false;" href='javascript:function tst1(e){if(e.links.length>0){var n,t=/.(jpe?g|dng|png|tiff?)$/i,r=0;for(i=0;i<e.links.length;i++)t.test(e.links[i].href)&&(r++,n=e.links[i].href);if(1==r){var m=document.createElement("input");return m.type="hidden",m.name="imgurl",m.value=n,m}}return null}function tst2(e){if(1==e.images.length){var n=e.createElement("input");return n.type="hidden",n.name="imgurl",n.value=e.images[0].src,n}return null}function tst3(e){var n=null;if(e.images.length>=1){var t,r=0;for(i=0;i<e.images.length;i++)size=e.images[i].width*e.images[i].height,size>r&&(r=size,t=e.images[i]);n=t}return n?(Inp=e.createElement("input"),Inp.type="hidden",Inp.name="imgurl",Inp.value=n.src,Inp):null}var form=document.createElement("form");form.target="_blank";var Inp=tst1(document);Inp||(Inp=tst2(document)),Inp||(Inp=tst3(document)),Inp?(form.action="http://getiptcpmd.nitsvc.net/getpmd/?imgurl="+Inp.value,form.appendChild(Inp),document.body.appendChild(form),form.submit()):alert("No image found for retrieving metadata.");'>IptcPMD</a></div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p>This service is provided by <a href="http://www.newsit.biz" target="_blank">NewsIT-M.W.Steidl</a></p>
            </div>
        </div>
    </div>
</body>
</html>